{"version":3,"file":"room.browser.js","sources":["../node_modules/rollup-plugin-node-globals/src/global.js","../node_modules/process-es6/browser.js","../src/room.js"],"sourcesContent":["export default typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {}\n","// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nexport function nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nexport var title = 'browser';\nexport var platform = 'browser';\nexport var browser = true;\nexport var env = {};\nexport var argv = [];\nexport var version = ''; // empty string to avoid regexp issues\nexport var versions = {};\nexport var release = {};\nexport var config = {};\n\nfunction noop() {}\n\nexport var on = noop;\nexport var addListener = noop;\nexport var once = noop;\nexport var off = noop;\nexport var removeListener = noop;\nexport var removeAllListeners = noop;\nexport var emit = noop;\n\nexport function binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nexport function cwd () { return '/' }\nexport function chdir (dir) {\n    throw new Error('process.chdir is not supported');\n};\nexport function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nexport function hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3\n  var seconds = Math.floor(clocktime)\n  var nanoseconds = Math.floor((clocktime%1)*1e9)\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0]\n    nanoseconds = nanoseconds - previousTimestamp[1]\n    if (nanoseconds<0) {\n      seconds--\n      nanoseconds += 1e9\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nexport function uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nexport default {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n","'use strict'\n\n/**\n * Creates a new http client to a roomdb instance\n *\n * @param {host} host of living room server (defaults to http://localhost:3000)\n */\nimport fetch from 'node-fetch'\nimport io from 'socket.io-client'\nimport bonjour from 'nbonjour'\n\nfunction getEnv (key) {\n  if (typeof process !== 'undefined') return process.env[key]\n}\n\nexport default class Room {\n  constructor (host) {\n    this._host = host || getEnv('LIVING_ROOM_HOST') || 'http://localhost:3000'\n    if (!this._host.startsWith('http://')) this._host = `http://${this._host}`\n    const serviceDefinition = { type: 'http', subtypes: ['livingroom'] }\n\n    if (bonjour) {\n      this._browser = bonjour.create().find(serviceDefinition, service => {\n        const { type, host, port } = service\n        this._host = `${type}://${host}:${port}`\n        console.log(`set new host to ${this._host}`)\n        this.connect()\n      })\n    }\n    this.connect()\n  }\n\n  connect () {\n    this._socket = io.connect(this._host)\n    if (window) {\n      this._socket.on('reconnect', () => {\n        window.location.reload(true)\n      })\n    }\n  }\n\n  /**\n   * @param {String | String[]} facts\n   * @param {Function} callback\n   */\n  subscribe (facts, callback) {\n    if (typeof facts === 'string') facts = [facts]\n    const patternsString = JSON.stringify(facts)\n    this._socket.on(patternsString, callback)\n    this._socket.emit('subscribe', patternsString)\n  }\n\n  /**\n   *\n   * @param {String} endpoint assert, retract, select\n   * @param {[String]} facts\n   */\n  _request (endpoint, facts, callback) {\n    if (!['assert', 'retract', 'select', 'facts'].includes(endpoint)) {\n      throw new Error('Unknown endpoint, try assert, retract, select, or facts')\n    }\n\n    if (typeof facts === 'string') facts = [facts]\n\n    if (!(endpoint === 'facts' || facts.length)) {\n      throw new Error('Please pass at least one fact')\n    }\n\n    // Can this return a promise with the result?\n    // Does that even make sense?\n    if (this._socket.connected) {\n      return new Promise((resolve, reject) => {\n        this._socket.emit(endpoint, facts, resolve)\n      })\n    }\n\n    const uri = `${this._host}/${endpoint}`\n\n    const post = {\n      method: 'POST',\n      body: JSON.stringify({ facts }),\n      headers: { 'Content-Type': 'application/json' }\n    }\n\n    return fetch(uri, post)\n      .then(response => response.json())\n      .catch(error => {\n        if (error.code === 'ECONNREFUSED') {\n          console.error(`No server listening on ${uri}`)\n          console.error(`Try 'npm start' to run a local service`)\n        } else {\n          console.error(error)\n        }\n      })\n  }\n\n  assert (facts, callback) {\n    return this._request('assert', facts, callback)\n  }\n\n  retract (facts, callback) {\n    return this._request('retract', facts, callback)\n  }\n\n  select (facts, callback) {\n    return this._request('select', facts, callback)\n  }\n\n  facts () {\n    return this._request('facts')\n  }\n}\n"],"names":["global"],"mappings":"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"}